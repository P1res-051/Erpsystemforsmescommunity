const l=o=>{const a=o.split("-");return a.length===3?`${a[2]}-${a[1]}-${a[0]}`:o},h=o=>{const a=o.split("-");return a.length===3?`${a[2]}-${a[1]}-${a[0]}`:o},u=()=>{const o=new Date,a=o.getFullYear(),t=String(o.getMonth()+1).padStart(2,"0"),r=String(o.getDate()).padStart(2,"0");return`${a}-${t}-${r}`},_=()=>{const o=new Date,a=o.getFullYear(),t=String(o.getMonth()+1).padStart(2,"0");return`${String(o.getDate()).padStart(2,"0")}-${t}-${a}`},n=o=>/brasil|atl√©tico|gr√™mio|palmeiras|corinthians|bahia|flamengo|vasco|s√£o paulo|botafogo|cruzeiro|santos|internacional|fluminense|fortaleza|cuiab√°|goi√°s|cear√°|ava√≠|chapecoense|sport|n√°utico|vit√≥ria|ponte preta|red bull|bragantino|coritiba|crb|paysandu|ferrovi√°ria|crici√∫ma/i.test(o||"");async function p(o=""){const a="https://automatixbest-api.automation.app.br/api/jogos",t=o?`${a}?date=${encodeURIComponent(o)}`:a;try{console.log(`üîÑ Buscando jogos da API: ${t}`);const r=await fetch(t,{headers:{accept:"application/json"}});if(!r.ok)throw new Error(`API retornou status ${r.status}`);const s=await r.json();if(console.log("‚úÖ Jogos recebidos:",s),!s.success||!s.data?.games)return console.warn("‚ö†Ô∏è API n√£o retornou jogos v√°lidos"),[];const g=s.data.games.map(e=>{const b=e.canais?String(e.canais).split("|").map(d=>d.trim()).filter(Boolean):[];return{comp:e.campeonato||"",stadium:e.estadio||"",date:s.data.date?l(s.data.date):u(),time:e.horario||"",home:{name:e.time_casa?.nome||"",abbr:"",badge:e.time_casa?.brasao||"https://via.placeholder.com/64/1e2a44/8ea9d9?text=?"},away:{name:e.time_fora?.nome||"",abbr:"",badge:e.time_fora?.brasao||"https://via.placeholder.com/64/1e2a44/8ea9d9?text=?"},score:e.placar_casa!==null&&e.placar_fora!==null?`${e.placar_casa} - ${e.placar_fora}`:"‚Äî",status:e.status_text==="Ao Vivo"?"live":e.status_text==="Encerrado"?"final":"prog",channels:b,is_big_game:e.is_big_game||!1}});return console.log(`‚úÖ ${g.length} jogos processados`),c(i(g))}catch(r){return console.error("‚ùå Erro ao buscar jogos da API:",r),[]}}function i(o){return o.map(a=>{const t=a.is_big_game||n(a.home.name)&&n(a.away.name)||a.channels&&a.channels.length>=2||/libertadores|champions|copa do mundo|mundial|final|s√©rie a|brasileir√£o/i.test(a.comp);return{...a,is_big_game:t}})}function c(o){return[...o].sort((a,t)=>{if(a.is_big_game!==t.is_big_game)return t.is_big_game?1:-1;const r=n(a.home.name)||n(a.away.name),s=n(t.home.name)||n(t.away.name);return r!==s?s?-1:1:a.time&&t.time?a.time>t.time?1:-1:0})}function m(o){return[{comp:"Brasileir√£o S√©rie A",stadium:"Maracan√£",date:o,time:"16:00",home:{name:"Flamengo",abbr:"FLA",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/I7iHXkLThH6K4hmlohnFdA_96x96.png"},away:{name:"Palmeiras",abbr:"PAL",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/7spurne-xEoTuRJ7dHkn_A_96x96.png"},score:"‚Äî",status:"prog",channels:["Premiere","Globo"],is_big_game:!0},{comp:"Copa Libertadores",stadium:"Arena MRV",date:o,time:"19:00",home:{name:"Atl√©tico-MG",abbr:"CAM",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/ChoNCqsT8aNhGw37RY7-4Q_96x96.png"},away:{name:"Fluminense",abbr:"FLU",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/KLDWYp-H8CAOT9H_JgizRg_96x96.png"},score:"‚Äî",status:"prog",channels:["SBT","ESPN"],is_big_game:!0},{comp:"Brasileir√£o S√©rie A",stadium:"Neo Qu√≠mica Arena",date:o,time:"21:30",home:{name:"Corinthians",abbr:"COR",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/OaiROGSDF8xSWE9ERdUA-w_96x96.png"},away:{name:"S√£o Paulo",abbr:"SAO",badge:"https://ssl.gstatic.com/onebox/media/sports/logos/jSgw5z0FMeWv_5vp3nJdXA_96x96.png"},score:"‚Äî",status:"prog",channels:["Premiere"],is_big_game:!0}]}async function f(o,a){const t=o||u(),r=o?h(o):"";try{const s=await p(r);return s.length>0?(console.log("‚úÖ Jogos carregados da API AutonomyX"),s):(console.log("üìä API n√£o retornou jogos, usando dados Mock"),c(i(m(t))))}catch(s){return console.error("‚ùå Erro ao buscar jogos:",s),c(i(m(t)))}}async function A(o){try{const a=await p(o);return a.length>0?a:c(i(m(l(o))))}catch(a){return console.error("‚ùå Erro ao buscar jogos por data:",a),c(i(m(l(o))))}}function w(){return _()}export{f as getGames,A as getGamesByDate,w as todayDateAPI};
